;/*FB_PKG_DELIM*/

__d("storiesDominantColorPicker",[],(function(t,n,r,o,a,i){"use strict";var e=8;function l(){return{blue:0,clusterSize:0,green:0,red:0}}function s(e,t,n,r){return(e.red-t)*(e.red-t)+(e.green-n)*(e.green-n)+(e.blue-r)*(e.blue-r)}function u(){for(var t=0,n=255/4,r=new Array(e),o=0;o<2;o++)for(var a=0;a<2;a++)for(var i=0;i<2;i++){var l={blue:n*i+n/2,clusterSize:0,green:n*a+n/2,red:n*o+n/2};r[t]=l,t++}return r}function c(t,n,r){for(var o=!1,a=t.length/4,i=0,u=0;i<a;i++,u+=4){for(var c=t[u],d=t[u+1],m=t[u+2],p=l(),_=1/0,f=0,g=0;g<e;g++){var h=s(n[g],c,d,m);h<_&&(_=h,f=g,p=n[g])}p.clusterSize++,r[i]!==f&&(r[i]=f,o=!0)}return o}function d(t,n,r){var o=new Array(e),a=new Array(e),i=new Array(e);o.fill(0),a.fill(0),i.fill(0);for(var l=t.length/4,s=0,u=0;s<l;s++,u+=4){var c=t[u],d=t[u+1],m=t[u+2],p=r[s];o[p]+=c,a[p]+=d,i[p]+=m}for(var _=0;_<e;_++){var f=n[_];f.clusterSize>0&&(f.red=o[_]/f.clusterSize,f.green=a[_]/f.clusterSize,f.blue=i[_]/f.clusterSize,f.clusterSize=0)}}function m(e){var t=e.length,n=u(),r=new Array(t);for(r.fill(-1);c(e,n,r);)d(e,n,r);return n.sort(function(e,t){return t.clusterSize-e.clusterSize})}i.default=m}),66);
__d("useFBReelsIsGroupReel_reel.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFBReelsIsGroupReel_reel",selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"if_viewer_can_see_reel_group_attribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null};a.exports=e}),null);
__d("useFBReelsIsGroupReel",["CometRelay","react-compiler-runtime","useFBReelsIsGroupReel_reel.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r,a,i,l=o("react-compiler-runtime").c(3),s=o("CometRelay").useFragment(e!==void 0?e:e=n("useFBReelsIsGroupReel_reel.graphql"),t),u=(s==null||(r=s.feedback)==null||(r=r.associated_group)==null||(r=r.if_viewer_can_see_reel_group_attribution)==null?void 0:r.__typename)!=null,c=(a=s==null||(i=s.feedback)==null||(i=i.associated_group)==null?void 0:i.id)!=null?a:null,d=!!u,m;return l[0]!==c||l[1]!==d?(m={groupID:c,isGroupReel:d},l[0]=c,l[1]=d,l[2]=m):m=l[2],m}l.default=s}),98);
__d("useFBReelsSingleVideoClickLogger_story.graphql",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}];return{argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__FBReels_deprecate_short_form_video_context_gkrelayprovider"},{kind:"RootArgument",name:"renderLocation"}],kind:"Fragment",metadata:null,name:"useFBReelsSingleVideoClickLogger_story",selections:[{condition:"__relay_internal__pv__FBReels_deprecate_short_form_video_context_gkrelayprovider",kind:"Condition",passingValue:!1,selections:[{alias:null,args:[{kind:"Variable",name:"location",variableName:"renderLocation"}],concreteType:"ShortFormVideoContext",kind:"LinkedField",name:"short_form_video_context",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:e,storageKey:null}],storageKey:null}]},{condition:"__relay_internal__pv__FBReels_deprecate_short_form_video_context_gkrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"InlineFragment",selections:e,type:"Video",abstractKey:null}],storageKey:null}],storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"tracking",storageKey:null}],type:"Story",abstractKey:null}})();a.exports=e}),null);
__d("useFBReelsSingleVideoClickLogger",["CometRelay","FBLogger","FBReelsGating","react-compiler-runtime","requireDeferred","useFBReelsSingleVideoClickLogger_story.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("FbShortsSingleVideoClickFalcoEvent").__setRef("useFBReelsSingleVideoClickLogger");function u(t){var a,i,l=o("react-compiler-runtime").c(3),u=o("CometRelay").useFragment(e!==void 0?e:e=n("useFBReelsSingleVideoClickLogger_story.graphql"),t),c=u==null?void 0:u.tracking,d=o("FBReelsGating").shouldDeprecateShortFormVideoContext(),m=d?u==null||(a=u.attachments)==null||(a=a[0])==null||(a=a.media)==null?void 0:a.id:u==null||(i=u.short_form_video_context)==null||(i=i.video)==null?void 0:i.id,p;return l[0]!==c||l[1]!==m?(p=function(t){s.onReady(function(e){if(c==null){r("FBLogger")("fb_reels_web").mustfix("useFBReelsSingleVideoClickLogger gets a null tracking string.");return}if(m==null){r("FBLogger")("fb_reels_web").mustfix("useFBReelsSingleVideoClickLogger gets a null videoID.");return}e.log(function(){return{referral_source:t,tracking:c,video_id:m}})})},l[0]=c,l[1]=m,l[2]=p):p=l[2],p}l.default=u}),98);
__d("useStoriesDominantColorPicker",["FBLogger","react","react-compiler-runtime","storiesDominantColorPicker"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState,d=100;function m(e){var t=o("react-compiler-runtime").c(10),n=e.defaultBottomColor,a=e.defaultTopColor,i=e.imageURL,l;t[0]!==n?(l=n?p(n):"",t[0]=n,t[1]=l):l=t[1];var s;t[2]!==a?(s=a?p(a):"",t[2]=a,t[3]=s):s=t[3];var m;t[4]!==l||t[5]!==s?(m={bottomColor:l,topColor:s},t[4]=l,t[5]=s,t[6]=m):m=t[6];var _=c(m),f=_[0],g=_[1],h,y;return t[7]!==i?(h=function(){if(i!=null){var e=new Image;return e.crossOrigin="Anonymous",e.onload=function(){var t=document.createElement("canvas"),n=e.width,o=e.height,a=n/o,i=Math.min(Math.max(n,o),d);(n>i||o>i)&&(n>o?(n=i,o=n/a):(o=i,n=o*a)),t.width=n,t.height=o;var l=t.getContext("2d");l.drawImage(e,0,0,n,o);try{var s=l.getImageData(0,0,n,Math.max(1,o*.05)),u=l.getImageData(0,o-o*.05,n,Math.max(1,o*.05)),c=r("storiesDominantColorPicker")(s.data),m=r("storiesDominantColorPicker")(u.data);g({bottomColor:p(m[0]),topColor:p(c[0])})}catch(e){r("FBLogger")("fb_stories_web").mustfix("Stories Create Dominant Color Bg throws exception")}},e.src=i,function(){e.onload=null}}},y=[i],t[7]=i,t[8]=h,t[9]=y):(h=t[8],y=t[9]),u(h,y),f}function p(e){return"rgb(\n    "+Math.round(e.red)+",\n    "+Math.round(e.green)+",\n    "+Math.round(e.blue)+")"}l.default=m}),98);